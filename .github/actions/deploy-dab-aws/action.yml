name: DAB - deploy
description: "---"

inputs:
  environment:
    description: ''
    default: tst

runs:
  using: 'composite'
  steps:
    - name: Checkout
      uses: actions/checkout@v4

    - name: Configure authentication
      uses: databricks/setup-cli@main

    - name: Databricks Deploy
      shell: bash
      working-directory: bundles/sample_bundle #parametrize
      run: |
        databricks auth describe
        databricks bundle deploy -t ${{ inputs.environment }}
      env:
        DATABRICKS_CLIENT_ID: 311f8d05-10c3-4627-81d5-dec76290a2e4
        DATABRICKS_CLIENT_SECRET: dose9f02fc4cbdc59b486d4e18d2f6f8e741
        # DATABRICKS_TOKEN: dose9f02fc4cbdc59b486d4e18d2f6f8e741 #rmv after tests
        # DATABRICKS_TOKEN: ${{ secrets.SP_TOKEN }}
        # DATABRICKS_BUNDLE_ENV: prod
